# Default TaxByte Configuration
# This file contains the default configuration values for the application.
# Override these values by creating a config/local.toml file or by setting
# environment variables with the TAXBYTE_ prefix.

[server]
# Server host address
host = "127.0.0.1"
# Server port
port = 8080
# Base URL for PDF generation (used by wkhtmltopdf)
base_url = "http://127.0.0.1:8080"

[database]
# PostgreSQL database URL
# Format: postgres://username:password@host:port/database
url = "postgres://postgres:postgres@localhost:5432/taxbyte"
# Maximum number of database connections in the pool
# Increased to handle wkhtmltopdf callback requests during PDF generation
max_connections = 30
# Database connection timeout in seconds
connect_timeout_seconds = 5
# Connection pool acquisition timeout in seconds
# Increased to 30s to handle wkhtmltopdf nested requests during PDF generation
acquire_timeout_seconds = 30

[redis]
# Redis connection URL
# Format: redis://[username:password@]host:port[/database]
url = "redis://localhost:6379"
# Redis connection timeout in seconds
connect_timeout_seconds = 5

[security]
# Minimum password length requirement
password_min_length = 12
# Session TTL in seconds (default: 1 hour)
session_ttl_seconds = 3600
# "Remember me" session TTL in seconds (default: 30 days)
remember_me_ttl_seconds = 2592000
# Base64-encoded 32-byte encryption key for OAuth tokens
# MUST be set via environment variable in production
# Generate with: openssl rand -base64 32
encryption_key_base64 = "2e26WueyLmI1t+XuJIu/o74VCrjf8yebwywMqEE8g5k="

[rate_limit]
# Maximum login attempts before rate limiting kicks in
login_max_attempts = 5
# Time window for login rate limiting in seconds (default: 5 minutes)
login_window_seconds = 300

# Google Drive configuration
# OAuth credentials from Google Cloud Console
[google_drive]
enabled = true
# Legacy service account support (deprecated, use OAuth instead)
service_account_key_path = "./config/google-service-account.json"
default_invoice_subfolder = "Invoices"
parent_folder_id = ""
# OAuth 2.0 credentials (recommended)
# Get from Google Cloud Console: https://console.cloud.google.com/
oauth_client_id = ""
oauth_client_secret = ""
oauth_redirect_url = "http://localhost:8080/oauth/google/callback"

[pdf]
# Directory for storing generated PDF files
output_dir = "./data/invoices/pdfs"
# Optional: custom path to wkhtmltopdf binary (defaults to "wkhtmltopdf" in PATH)
# wkhtmltopdf_path = "/usr/bin/wkhtmltopdf"
